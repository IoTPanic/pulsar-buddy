TODO

[] check and Serial write (or other error) when periods out of range

[] speed up centerNumber by using the fixed size of digits in the font

[x] field render for BPM
	- sideways
	- select selects from source menu:
		TAP - 1/4 - 1/16 - 24ppb 32ppb 48ppb


[] All of State needs to be checked, not just the
	pending functions, for when to commit it.

[] recconcile manual BPM and sync'd BPM

-- Slave clock

[] figure out how to use TC3 as a capture device
	- or move tuplet to TC3, and use TCC0
[] update and display bpm
	? fractional bpm display?
	? smoothing of display so user's don't freak out
	? update display at lower rate than tracker

[] fixed BPM mode
	? UI for both setting fixed, and then BPM? adjusting BPM quickly
	[] display "sync" when trying to change BPM in a sync'd mode?

[] tap tempo
	? separate mode? or just part of fixed?


--- Later

[] Figure out production / debug build method
	[] review LOG calls in flash.cpp

[] if no beats after X min... shut down display totally
	- fire back on when beat detected

[] make enums be uint8_t based
	- probably not really worth it


QUESTIONS

[] if total reset length is kept under 4 x 4/4 (or even 8 x 8/1!)
	then all cycle counts in q fit in 16 bits

[] should tuplet load be sync'd to measure or full sequence?
[] should sequence length, when reloaded, be reset to first measure?


[] should BPM be kept in inverted form?
	- for display we want BPM
	- for calcs (see CpuClockDivisor()) we want inverted

[] why doesn't TCC1.WO1 on PAD_SPI_RX (pin 0, PA11) work?

================

Changes to settings and timing:

- Sequence Length -

setting:   n x c / u

	measure length (m) = c x q(u)
	total length (t) = n x c x q(u)

	q(1/4 note) = 10080
	q(1/8 note) =  5040
	etc...


state:
	measure (s) in [0..m)
	reset (r) in [0..t)

change n:
	s' = s
	r' = r mod t'

change c or u:
	s' = s mod m'
    r' = (r div m)*m' + s'
