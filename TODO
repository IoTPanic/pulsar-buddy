TODO

[x] All of State needs to be checked, not just the
	pending functions, for when to commit it.
[x] why commiting on startup?
[x] review sync of capture variables
	[x] rename capture variables
[x] don't update sync until exit field?

[x] beat & tuplet seem to drift from seq & measure
	[x] periods were off - they needed to be N-1

[x] input pulses arrive inverted!
	- invert in events or invert in capture in timer

[x] clean up phase error logic
	[x] do qcb calc just once at pending time
	[x] decide how much filtering to put on it

[x] display BPM should be based on ext clk est.
	- before the phase adj. is applied.


[] account for various lengths of the sequence
	- what about when sequence is very short?!?!?!
	[] bug on capture at sequence boundry!

[] review rounding and trunc. errors in capture code




[] how to stay sync'd to the one?


[] smooth display of bpm so user's don't freak out
	[] commit should be based on displayed (smoothed) BPM


[] handle total sync drop gracefully
	- restart as if from scratch
	- display no-sync?


[] accelleration of encoder when setting BPM?

[] long press on BPM field doesn't work in all modes
	- esp. after timeout

[] GCC compilation flag to disallow implicit numeric conversions?


--- Later

[] switch to explicit timing of external clock?

[] tap tempo
	? separate mode? or just part of fixed?

[] images for sync modes


[] Figure out production / debug build method
	[] review LOG calls in flash.cpp

[] if no beats after X min... shut down display totally
	- fire back on when beat detected

[] make enums be uint8_t based
	- probably not really worth it

[] need a UI for "apply right now!"
[] need a UI for "really, reset the whole dang thing!"

[] calibration? I bet xtal isn't exactly 48MHz!

[] check and Serial write (or other error) when periods out of range

[] speed up centerNumber by using the fixed size of digits in the font




HARDWARE
--------

Power
	[] need barrel splitter or tap

Physical
	? how to assemble?
	? alternate / better encoder?
	? encoder cap
	? box





QUESTIONS

[] if total reset length is kept under 4 x 4/4 (or even 8 x 8/1!)
	then all cycle counts in q fit in 16 bits

[] should tuplet load be sync'd to measure or full sequence?
[] should sequence length, when reloaded, be reset to first measure?


[] why doesn't TCC1.WO1 on PAD_SPI_RX (pin 0, PA11) work?



